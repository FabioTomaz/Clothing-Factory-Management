USE [GESTAO-FABRICA-VESTUARIO-LABORAL]
GO

SELECT N_FUNCIONARIO, UTILIZADOR.EMAIL as userMail, SALARIO, NOME, UTILIZADOR.TELEFONE as userPhone, 
HORA_ENTRADA, HORA_SAIDA, UTILIZADOR.CODPOSTAL1 as codP1, UTILIZADOR.CODPOSTAL2 as codP2, UTILIZADOR.RUA as userRua, UTILIZADOR.N_PORTA as userPorta,
ZONA.LOCALIDADE as loc, N_FUNCIONARIO_SUPER FROM UTILIZADOR JOIN [FABRICA-FILIAL]  ON CHEFE = N_FUNCIONARIO 
JOIN ZONA ON (ZONA.CODPOSTAL1 = UTILIZADOR.CODPOSTAL1 AND ZONA.CODPOSTAL2 = UTILIZADOR.CODPOSTAL2)
WHERE CHEFE = 1

SELECT * FROM UTILIZADOR JOIN ZONA ON (ZONA.CODPOSTAL1 = UTILIZADOR.CODPOSTAL1 AND ZONA.CODPOSTAL2 = UTILIZADOR.CODPOSTAL2)
 WHERE N_FABRICA = 1

 SELECT * FROM [MATERIAIS-PRODUTO] 
 WHERE REFERENCIA_FABRICA = 2

 CREATE FUNCTION dbo.getTypeID (@type varchar(50) ) RETURNS INT
AS
	BEGIN
		DECLARE @ID INT
		SELECT @ID = ID FROM [TIPO-UTILIZADOR] 
		WHERE TIPO = @type
		return @ID
	END
GO

SELECT TIPO FROM [UTILIZADOR-TIPOS]
             JOIN [TIPO-UTILIZADOR] ON ID_TIPO = ID WHERE UTILIZADOR=1

INSERT INTO [UTILIZADOR-TIPOS] (UTILIZADOR, ID_TIPO) VALUES 
                    (4, 2) 
